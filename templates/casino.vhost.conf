<VirtualHost *:{{ casino_port }}>
    ServerName {{ ansible_fqdn }}
    ErrorLog logs/ssl_error_log
    TransferLog logs/ssl_access_log
    LogLevel warn
    SSLEngine on
    SSLProtocol -ALL +TLSv1 +TLSv1.1 +TLSv1.2
    SSLCipherSuite !DH:EECDH+ECDSA+AESGCM:EECDH+aRSA+AESGCM:EECDH+ECDSA+SHA384:EECDH+ECDSA+SHA256:EECDH+aRSA+SHA384:EECDH+aRSA+SHA256:EECDH+aRSA+RC4:EECDH:EDH+aRSA:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!RC4
    SSLCertificateFile {{ casino_ssl_cert | default('/etc/pki/tls/certs/localhost.crt') }}
    {% if casino_ssl_ca_cert is defined %}
    SSLCACertificateFile {{ casino_ssl_ca_cert }}
    {% endif %}
    SSLCertificateKeyFile {{ casino_ssl_key | default('/etc/pki/tls/private/localhost.key') }}
    SetEnvIf User-Agent ".*MSIE.*" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0
    CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
    DocumentRoot {{ casino_dir }}/public
    <Directory {{ casino_dir }}/public>
        AllowOverride all
        # This relaxes Apache security settings.
    </Directory>
</VirtualHost>

<VirtualHost *:80>
    ServerName {{ ansible_fqdn }}
    Redirect / https://{{ ansible_fqdn }}:{{ casino_port }}
</VirtualHost>
